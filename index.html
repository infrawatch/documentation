<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="generator" content="Asciidoctor 2.0.10"/>
<meta name="author" content="OpenStack Documentation Team"/>
<title>Service Telemetry Framework</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"/>
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Service Telemetry Framework</h1>
<div class="details">
<span id="author" class="author">OpenStack Documentation Team</span><br/>
<span id="email" class="email"><a href="mailto:rhos-docs@redhat.com">rhos-docs@redhat.com</a></span><br/>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#introduction-to-stf_assembly">Introduction to Service&#160;Telemetry&#160;Framework</a>
<ul class="sectlevel2">
<li><a href="#architecture_introduction-to-stf">STF architecture</a></li>
<li><a href="#installation-size_introduction-to-stf">Installation size</a></li>
</ul>
</li>
<li><a href="#installing-the-core-components-of-stf_introduction-to-stf">Installing the core components of Service&#160;Telemetry&#160;Framework</a>
<ul class="sectlevel2">
<li><a href="#installing-the-core-components-of-stf_installing-the-core-components-of-stf">The core components of STF</a></li>
<li><a href="#preparing-your-openshift-environment-for-stf_installing-the-core-components-of-stf">Preparing your OKD environment for STF</a></li>
<li><a href="#deploying-stf-to-the-openshift-environment_installing-the-core-components-of-stf">Deploying STF to the OKD environment</a></li>
<li><a href="#removing-stf-from-the-openshift-environment_installing-the-core-components-of-stf">Removing STF from the OKD environment</a></li>
</ul>
</li>
<li><a href="#completing-the-stf-configuration_installing-the-core-components-of-stf">Completing the Service&#160;Telemetry&#160;Framework configuration</a>
<ul class="sectlevel2">
<li><a href="#configuring-openstack-on-the-client-side_completing-the-stf-configuration">Configuring OpenStack on the client side</a></li>
<li><a href="#configuring-red-hat-openstack-platform-overcloud-for-stf_completing-the-stf-configuration">Configuring OpenStack overcloud for STF</a></li>
<li><a href="#validating-clientside-installation_completing-the-stf-configuration">Validating clientside installation</a></li>
</ul>
</li>
<li><a href="#configuring-stf-components_completing-the-stf-configuration">Configuring Service&#160;Telemetry&#160;Framework data collection</a></li>
<li><a href="#advanced-features_configuring-stf-components">Advanced features</a>
<ul class="sectlevel2">
<li><a href="#alerts_advanced-features">Alerts</a></li>
<li><a href="#high-availability_advanced-features">High availability</a></li>
<li><a href="#dashboards_advanced-features">Dashboards</a></li>
<li><a href="#configuring-multiple-clouds_advanced-features">Configuring multiple clouds</a></li>
<li><a href="#ephemeral-storage_advanced-features">Ephemeral Storage</a></li>
<li><a href="#manifest-overrides_advanced-features">Customizing The Deployment</a></li>
</ul>
</li>
<li><a href="#appe-stf-collectd-plugins">Appendix A: collectd plug-ins</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="introduction-to-stf_assembly">Introduction to Service&#160;Telemetry&#160;Framework</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Service&#160;Telemetry&#160;Framework (STF) is an application that runs on OpenShift (OKD). Use STF to collect metrics and record events from the nodes in your systems that you want to monitor. The metrics and event information travels on a message bus to the server side for storage. You can use this centralized information as the source for alerts, visualization, or the source of truth for orchestration frameworks.
STF provides metrics and events data collection from OpenStack infrastructure, fast and reliable transport of data, and built-in data storage and alerting capabilities. An advantage over other monitoring systems is its lighter weight and modular design.</p>
</div>
<div class="sect2">
<h3 id="architecture_introduction-to-stf">STF architecture</h3>
<div class="paragraph">
<p>STF uses the following components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>collectd to collect metrics</p>
</li>
<li>
<p>Prometheus as time-series data storage</p>
</li>
<li>
<p>ElasticSearch as events data storage</p>
</li>
<li>
<p>An AMQP 1.x compatible messaging bus to shuttle the metrics to STF for storage in Prometheus</p>
</li>
<li>
<p>Smart Gateway to pick metrics and events from the AMQP 1.x bus and to deliver events to ElasticSearch or to provide metrics to Prometheus</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following diagram is an overview of STF architecture:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/OpenStack_STF_Overview_37_1019_arch.png" alt="OpenStack STF Overview 37 1019 arch"/>
</div>
</div>
<div class="paragraph">
<p>On the client side, collectd collects high-resolution metrics. collectd delivers the data to Prometheus by using the AMQP1 plugin, which places the data onto the
message bus. On the server side, a Golang application called the Smart Gateway takes the data stream from the bus and exposes it as a local scrape endpoint for Prometheus.</p>
</div>
<div class="paragraph">
<p>Server-side STF monitoring infrastructure consists of the following layers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Service&#160;Telemetry&#160;Framework 1.x (STF)</p>
</li>
<li>
<p>OpenShift (OKD)</p>
</li>
<li>
<p>Infrastructure platform</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/STF_Overview_37_0819_deployment_prereq.png" alt="STF Overview 37 0819 deployment prereq"/>
</div>
</div>
<div class="paragraph">
<p>For more information about how to deploy OpenShift, see <a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.3/">Product Documentation</a>. You can install OpenShift on cloud platforms or on bare metal.
For more information about STF performance and scaling, see <a href="https://access.redhat.com/articles/4907241" class="bare">https://access.redhat.com/articles/4907241</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Do not install OpenShift on the same infrastructure that you want to monitor.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="installation-size_introduction-to-stf">Installation size</h3>
<div class="paragraph">
<p>The size of your OpenShift installation depends on the following factors:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The number of nodes being monitored.</p>
</li>
<li>
<p>The number of metrics being collected.</p>
</li>
<li>
<p>The resolution of metrics.</p>
</li>
<li>
<p>The length of time that you want to store the data.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Installation of Service&#160;Telemetry&#160;Framework (STF) is dependent on an existing OpenShift environment and it is recommended that monitoring of OpenStack be done on an installed platform separate of your OpenStack environment. Installation of OpenShift (OKD) can be done on baremetal or various supported cloud platforms. Installation of OKD is covered at <a href="https://docs.openshift.com/container-platform/4.3/welcome/index.html#cluster-installer-activities" class="bare">https://docs.openshift.com/container-platform/4.3/welcome/index.html#cluster-installer-activities</a>.</p>
</div>
<div class="paragraph">
<p>The sizing of OKD is dependent on the infrastructure selected. More information about minimum resources requirements when installing OKD on baremetal is available at <a href="https://docs.openshift.com/container-platform/4.3/installing/installing_bare_metal/installing-bare-metal.html#minimum-resource-requirements_installing-bare-metal" class="bare">https://docs.openshift.com/container-platform/4.3/installing/installing_bare_metal/installing-bare-metal.html#minimum-resource-requirements_installing-bare-metal</a>. For installation requirements of the various public and private cloud platforms available to install to, see the corresponding installation documentation for your cloud of choice.</p>
</div>
<div class="sect3">
<h4 id="development-environment-resource-requirement_introduction-to-stf">Development environment resource requirements</h4>
<div class="paragraph">
<p>An all-in-one development environment for STF can be locally created using <a href="https://code-ready.github.io/crc/">CodeReady Containers</a>. Installation process of CodeReady Containers (CRC) is available at <a href="https://code-ready.github.io/crc/#installation_gsg" class="bare">https://code-ready.github.io/crc/#installation_gsg</a>.</p>
</div>
<div class="paragraph">
<p>The <a href="https://code-ready.github.io/crc/#minimum-system-requirements-hardware_gsg">minimum resource requirements</a> for CRC is not enough by default to run STF. It is recommended that your host system has the following resources available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>4 physical cores (8 hyperthreaded cores)</p>
</li>
<li>
<p>64 GB of memory</p>
</li>
<li>
<p>80 GB of storage space</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After completing the installation of CRC it is recommended you start your environment with the following commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>crc start --memory=49152 --cpus=8</pre>
</div>
</div>
<div class="paragraph">
<p>If you have an existing environment it must be destroyed and recreated in order for the resource requests to have an effect. To recreate the environment first run <code>crc delete</code> to delete the virtual machine, and then run the provided command to create your environment.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installing-the-core-components-of-stf_introduction-to-stf">Installing the core components of Service&#160;Telemetry&#160;Framework</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before you install STF, ensure that  OpenShift version 4.x is running and you understand the core components of the framework. As part of the OpenShift installation planning process though, ensure that the administrator provides persistent storage and enough resources to run the STF components on top of the OpenShift environment.</p>
</div>
<div class="sect2">
<h3 id="installing-the-core-components-of-stf_installing-the-core-components-of-stf">The core components of STF</h3>
<div class="paragraph">
<p>The following STF core components are managed by <a href="https://coreos.com/blog/introducing-operators.html">Operators</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Prometheus and AlertManager</p>
</li>
<li>
<p>ElasticSearch</p>
</li>
<li>
<p>Smart Gateway</p>
</li>
<li>
<p>Apache&#160;Qpid&#160;Dispatch&#160;Router</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each component has a corresponding Operator that you can use to load the various application components and objects.</p>
</div>
</div>
<div class="sect2">
<h3 id="preparing-your-openshift-environment-for-stf_installing-the-core-components-of-stf">Preparing your OKD environment for STF</h3>
<div class="paragraph">
<p>As you prepare your OKD environment for STF, you must plan for persistent storage, adequate resources, and event storage:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ensure that persistent storage is available in your OpenShift cluster for storing data in a production system. For more information, see <a href="#persistent-volumes">Persistent volumes</a>.</p>
</li>
<li>
<p>Ensure that enough resources are available to run the Operators and the application containers. For more information, see <a href="#resource-allocation">Resource allocation</a>.</p>
</li>
<li>
<p>To install ElasticSearch, you must use a community catalog source. If you do not want to use a community catalog or if you do not want to store events, see <a href="#Deploying STF to the OKD environment">[Deploying STF to the OKD environment]</a>.</p>
</li>
<li>
<p><code>vm_max_count</code> has been set for nodes that ElasticSearch will be scheduled to using the Node Tuning Operator. For more information, see <a href="#node-tuning-operator">Node tuning operator</a>.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="persistent-volumes">Persistent volumes</h4>
<div class="paragraph">
<p>STF uses persistent storage in OKD to instantiate the volumes dynamically for Prometheus and ElasticSearch to store metrics and events. For more information about configuring persistent storage for OKD, see <a href="https://docs.openshift.com/container-platform/4.3/storage/understanding-persistent-storage.html" class="bare">https://docs.openshift.com/container-platform/4.3/storage/understanding-persistent-storage.html</a></p>
</div>
<div class="sect4">
<h5 id="ephemeral-storage">Using ephemeral storage</h5>
<div class="paragraph">
<p>It&#8217;s possible to use ephemeral storage with STF with a caveat that it can result in data loss should a pod be restarted, updated, or rescheduled onto another node. Due the volatility of ephemeral storage it is only recommended to be used for development or testing, and not production environments.</p>
</div>
<div class="paragraph">
<p>To enable ephemeral storage for STF set <code>storageEphemeralEnabled: true</code> in your <code>ServiceTelemetry</code> manifest. For more information about enabling ephemeral storage for STF, see <a href="#configuring-ephemeral-storage">[configuring-ephemeral-storage]</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="resource-allocation">Resource allocation</h4>
<div class="paragraph">
<p>To enable the scheduling of pods within the OpenShift infrastructure, you need resources for the components that are running and for the number of running resources. If you do not allocate enough resources, pods remain in a <code>Pending</code> state because they cannot be scheduled.</p>
</div>
<div class="paragraph">
<p>The amount of resources you require to run STF depends on your environment and the number of nodes and clouds you are monitoring. For recommendations around sizing for metrics collection see <a href="https://access.redhat.com/articles/4907241" class="bare">https://access.redhat.com/articles/4907241</a>. For information about sizing ElasticSearch, see <a href="https://www.elastic.co/guide/en/cloud-on-k8s/current/k8s-managing-compute-resources.html" class="bare">https://www.elastic.co/guide/en/cloud-on-k8s/current/k8s-managing-compute-resources.html</a></p>
</div>
</div>
<div class="sect3">
<h4 id="disabling-event-storage">Disabling event storage</h4>
<div class="paragraph">
<p>If do not plan to store events in ElasticSearch, do not enable the OperatorHub.io Community Catalog Source and do not subscribe to the Elastic Cloud on Kubernetes Operator. You must set events_enabled to false in your ST object. For more information, see Installing the core components of STF.</p>
</div>
</div>
<div class="sect3">
<h4 id="node-tuning-operator">Node tuning operator</h4>
<div class="paragraph">
<p>STF uses ElasticSearch to store events, which requires a larger than normal <code>vm.max_map_count</code>. For more information about virtual memory usage by ElasticSearch, see <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/vm-max-map-count.html" class="bare">https://www.elastic.co/guide/en/elasticsearch/reference/current/vm-max-map-count.html</a></p>
</div>
<div class="paragraph">
<p>You cannot apply node tuning, such as virtual memory map count values, manually using the <code>sysctl</code> command because OpenShift manages nodes directly. To configure values and apply them to the infrastructure, you must use the node tuning operator. For more information about the node tuning operator, see <a href="https://docs.openshift.com/container-platform/4.3/scalability_and_performance/using-node-tuning-operator.html">Using the Node Tuning Operator</a>.</p>
</div>
<div class="paragraph">
<p>In an OKD deployment, the default node tuning operator specification provides the required profiles for ElasticSearch workloads or pods scheduled on nodes. To view the default cluster node tuning, specification run the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>oc get Tuned/default -o yaml -n openshift-cluster-node-tuning-operator</pre>
</div>
</div>
<div class="paragraph">
<p>The output of the default specification is documented at <a href="https://docs.openshift.com/container-platform/4.3/scalability_and_performance/using-node-tuning-operator.html#custom-tuning-default-profiles-set_node-tuning-operator">Default profiles set on a cluster</a>. Assignment of profiles is managed in the <code>recommend</code> section where profiles are applied to a node when certain conditions are met. When scheduling ElasticSearch to a node in STF, one of the following profiles is applied:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>openshift-control-plane-es</code></p>
</li>
<li>
<p><code>openshift-node-es</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When scheduling an ElasticSearch pod, there must be a label matching <code>tuned.openshift.io/elasticsearch</code> present. If the label is present, one of the two profiles is assigned to the pod. No action is required by the administrator if you use the recommended Operator for ElasticSearch. If you use a custom-deployed ElasticSearch with STF, ensure that you add the <code>tuned.openshift.io/elasticsearch</code> label to all scheduled pods.</p>
</div>
<div class="paragraph">
<p>For more information about how the profiles are applied to nodes, see <a href="https://docs.openshift.com/container-platform/4.3/scalability_and_performance/using-node-tuning-operator.html#custom-tuning-specification_node-tuning-operator" class="bare">https://docs.openshift.com/container-platform/4.3/scalability_and_performance/using-node-tuning-operator.html#custom-tuning-specification_node-tuning-operator</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="deploying-stf-to-the-openshift-environment_installing-the-core-components-of-stf">Deploying STF to the OKD environment</h3>
<div class="paragraph">
<p>There are two ways in which you can deploy STF to the OKD environment:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Storage of events with ElasticSearch. For more information, see <a href="#deploying-stf-to-the-openshift-environment-with-elasticsearch">Deploying STF to the OKD environment with ElasticSearch</a>.</p>
</li>
<li>
<p>Without ElasticSearch and disabling events support. For more information, see <a href="#deploying-stf-to-the-openshift-environment-without-elasticsearch">Deploying STF to the OKD environment without ElasticSearch</a>.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="deploying-stf-to-the-openshift-environment-with-elasticsearch">Deploying STF to the OKD environment with ElasticSearch</h4>
<div class="paragraph">
<p>Complete the following tasks:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a namespace. For more information, see <a href="#creating-a-namespace">Creating a namespace</a>.</p>
</li>
<li>
<p>Create an OperatorGroup. For more information, see <a href="#creating-an-operatorgroup">Creating an OperatorGroup</a>.</p>
</li>
<li>
<p>Enable the OperatorHub.io Community Catalog Source. For more information, see <a href="#enabling-the-operatorhubio-community-catalog-source">Enabling the OperatorHub.io Community Catalog Source</a>.</p>
</li>
<li>
<p>Enable the InfraWatch Operator Source. For more information, see <a href="#enabling-the-infrawatch-operator-source">Enabling InfraWatch Operator Source</a>.</p>
</li>
<li>
<p>Subscribe to the AMQ Certificate Manager Operator. For more information, see <a href="#subscribing-to-the-amq-certificate-manager-operator">Subscribing to the AMQ Certificate Manager Operator</a>.</p>
</li>
<li>
<p>Subscribe to the Elastic Cloud on Kubernetes Operator. For more information, see <a href="#subscribing-to-elastic-cloud-on-kubernetes-operator">Subscribing to the Elastic Cloud on Kubernetes Operator</a>.</p>
</li>
<li>
<p>Subscribe to the Service Telemetry Operator. For more information, see <a href="#subscribing-to-the-service-telemetry-operator">Subscribing to the Service Telemetry Operator</a>.</p>
</li>
<li>
<p>Create a ServiceTelemetry object in OKD. For more information, see <a href="#creating-a-servicetelemetry-object-in-openshift">Creating a ServiceTelemetry object in OKD</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="deploying-stf-to-the-openshift-environment-without-elasticsearch">Deploying STF to the OKD environment without ElasticSearch</h4>
<div class="paragraph">
<p>Complete the following tasks:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a namespace. For more information, see <a href="#creating-a-namespace">Creating a namespace</a>.</p>
</li>
<li>
<p>Create an OperatorGroup. For more information, see <a href="#creating-an-operatorgroup">Creating an OperatorGroup</a>.</p>
</li>
<li>
<p>Enable the InfraWatch Operator Source. For more information, see <a href="#enabling-the-infrawatch-operator-source">Enabling InfraWatch Operator Source</a>.</p>
</li>
<li>
<p>Subscribe to the AMQ Certificate Manager Operator. For more information, see <a href="#subscribing-to-the-amq-certificate-manager-operator">Subscribing to the AMQ Certificate Manager Operator</a>.</p>
</li>
<li>
<p>Subscribe to the Service Telemetry Operator. For more information, see <a href="#subscribing-to-the-service-telemetry-operator">Subscribing to the Service Telemetry Operator</a>.</p>
</li>
<li>
<p>Create a ServiceTelemetry object in OKD. For more information, see <a href="#creating-a-servicetelemetry-object-in-openshift">Creating a ServiceTelemetry object in OKD</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="creating-a-namespace">Creating a namespace</h4>
<div class="paragraph">
<p>Create a namespace to hold the STF components. The <code>service-telemetry</code> namespace is used throughout the documentation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>oc new-project service-telemetry</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="creating-an-operatorgroup">Creating an OperatorGroup</h4>
<div class="paragraph">
<p>Create an OperatorGroup in the namespace to permit scheduling of the Operator pods:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>oc apply -f - &lt;&lt;EOF
apiVersion: operators.coreos.com/v1
kind: OperatorGroup
metadata:
  name: service-telemetry-operator-group
  namespace: service-telemetry
spec:
  targetNamespaces:
  - service-telemetry
EOF</pre>
</div>
</div>
<div class="paragraph">
<p>For more information, see <a href="https://docs.openshift.com/container-platform/4.3/operators/understanding_olm/olm-understanding-operatorgroups.html">OperatorGroups</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="enabling-the-operatorhubio-community-catalog-source">Enabling the OperatorHub.io Community Catalog Source</h4>
<div class="paragraph">
<p>Before you install ElasticSearch (ES), you must have access to the resources on the OperatorHub.io Community Catalog Source:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>oc apply -f - &lt;&lt;EOF
apiVersion: operators.coreos.com/v1alpha1
kind: CatalogSource
metadata:
  name: operatorhubio-operators
  namespace: openshift-marketplace
spec:
  sourceType: grpc
  image: quay.io/operator-framework/upstream-community-operators:latest
  displayName: OperatorHub.io Operators
  publisher: OperatorHub.io
EOF</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="enabling-the-infrawatch-operator-source">Enabling InfraWatch Operator Source</h4>
<div class="paragraph">
<p>Before you deploy STF on OpenShift, you must enable the operator source:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install an OperatorSource that contains the Service Telemetry Operator and the Smart Gateway Operator:</p>
<div class="listingblock">
<div class="content">
<pre>oc apply -f - &lt;&lt;EOF
apiVersion: operators.coreos.com/v1
kind: OperatorSource
metadata:
  labels:
    opsrc-provider: infrawatch
  name: infrawatch-operators
  namespace: openshift-marketplace
spec:
  authorizationToken: {}
  displayName: InfraWatch Operators
  endpoint: https://quay.io/cnr
  publisher: InfraWatch
  registryNamespace: infrawatch
  type: appregistry
EOF</pre>
</div>
</div>
</li>
<li>
<p>To validate the creation of your OperatorSource, run the <code>oc get operatorsources</code> command. A successful import results in the <code>MESSAGE</code> field returning a result of <code>The object has been successfully reconclied</code>.</p>
<div class="listingblock">
<div class="content">
<pre>$ oc get -nopenshift-marketplace operatorsource infrawatch-operators

NAME                   TYPE          ENDPOINT              REGISTRY     DISPLAYNAME            PUBLISHER    STATUS      MESSAGE                                       AGE
infrawatch-operators   appregistry   https://quay.io/cnr   infrawatch   InfraWatch Operators   InfraWatch   Succeeded   The object has been successfully reconciled   5m23s</pre>
</div>
</div>
</li>
<li>
<p>To validate that the Operators are available from the catalog, run the <code>oc get packagemanifest</code> command:</p>
<div class="listingblock">
<div class="content">
<pre>$ oc get packagemanifests | grep InfraWatch

servicetelemetry-operator                    InfraWatch Operators       7m20s
smartgateway-operator                        InfraWatch Operators       7m20s</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="subscribing-to-the-amq-certificate-manager-operator">Subscribing to the AMQ Certificate Manager Operator</h4>
<div class="paragraph">
<p>You must subscribe to the AMQ Certificate Manager Operator prior to the deployment of the other components because the AMQ Certificate Manager Operator runs globally-scoped and is not compatible with the dependency management of Operator Lifecycle Manager when used with other namespace-scoped operators.</p>
</div>
<h5 id="_procedure" class="discrete">Procedure</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Subscribe to the AMQ Certificate Manager Operator, create the subscription, and validate the AMQ7 Certificate Manager:</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The AMQ Certificate Manager is installed globally for all namespaces, so the <code>namespace</code> value provided is <code>openshift-operators</code>. You might not see your <code>amq7-cert-manager.v1.0.0</code> ClusterServiceVersion in the <code>service-telemetry</code> namespace for a few minutes until the processing executes against the namespace.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre>oc apply -f - &lt;&lt;EOF
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name: amq7-cert-manager
  namespace: openshift-operators
spec:
  channel: alpha
  installPlanApproval: Automatic
  name: amq7-cert-manager
  source: redhat-operators
  sourceNamespace: openshift-marketplace
  startingCSV: amq7-cert-manager.v1.0.0
EOF</pre>
</div>
</div>
</li>
<li>
<p>To validate your <code>ClusterServiceVersion</code>, run the <code>oc get csv</code> command. Ensure that amq7-cert-manager.v1.0.0 has a phase <code>Succeeded</code>.</p>
<div class="listingblock">
<div class="content">
<pre>$ oc get --namespace openshift-operators csv

NAME                       DISPLAY                                         VERSION   REPLACES   PHASE
amq7-cert-manager.v1.0.0   Red Hat Integration - AMQ Certificate Manager   1.0.0                Succeeded</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="subscribing-to-elastic-cloud-on-kubernetes-operator">Subscribing to the Elastic Cloud on Kubernetes Operator</h4>
<div class="paragraph">
<p>Before you install the Service Telemetry Operator and if you plan to store events in to ElasticSearch, you need to enable the Elastic Cloud Kubernetes Operator.</p>
</div>
<h5 id="_procedure_2" class="discrete">Procedure</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Apply the following manifest to your OKD environment to enable the Elastic Cloud on Kubernetes Operator:</p>
<div class="listingblock">
<div class="content">
<pre>oc apply -f - &lt;&lt;EOF
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name: elastic-cloud-eck
  namespace: service-telemetry
spec:
  channel: stable
  installPlanApproval: Automatic
  name: elastic-cloud-eck
  source: operatorhubio-operators
  sourceNamespace: openshift-marketplace
  startingCSV: elastic-cloud-eck.v1.0.1
EOF</pre>
</div>
</div>
</li>
<li>
<p>To validate that the <code>ClusterServiceVersion</code> for ElasticSearch Cloud on Kubernetes succeeded, run the <code>oc get csv</code> command:</p>
<div class="listingblock">
<div class="content">
<pre>$ oc get csv

NAME                       DISPLAY                                         VERSION   REPLACES                   PHASE
elastic-cloud-eck.v1.0.1   Elastic Cloud on Kubernetes                     1.0.1     elastic-cloud-eck.v1.0.0   Succeeded</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="subscribing-to-the-service-telemetry-operator">Subscribing to the Service Telemetry Operator</h4>
<div class="paragraph">
<p>To instantiate an STF instance, create the <code>ServiceTelemetry</code> object to allow the Service Telemetry Operator to create the environment.</p>
</div>
<h5 id="_procedure_3" class="discrete">Procedure</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>To create the Service Telemetry Operator subscription, run the <code>oc apply -f</code> command:</p>
<div class="listingblock">
<div class="content">
<pre>oc apply -f - &lt;&lt;EOF
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name: servicetelemetry-operator
  namespace: service-telemetry
spec:
  channel: stable
  installPlanApproval: Automatic
  name: servicetelemetry-operator
  source: infrawatch-operators
  sourceNamespace: openshift-marketplace
EOF</pre>
</div>
</div>
</li>
<li>
<p>To validate the Service Telemetry Operator and the dependent operators, run the following command:</p>
<div class="listingblock">
<div class="content">
<pre>$ oc get csv --namespace service-telemetry
NAME                                DISPLAY                                         VERSION   REPLACES                            PHASE
amq7-cert-manager.v1.0.0            Red Hat Integration - AMQ Certificate Manager   1.0.0                                         Succeeded
amq7-interconnect-operator.v1.2.0   Red Hat Integration - AMQ Interconnect          1.2.0                                         Succeeded
elastic-cloud-eck.v1.0.1            Elastic Cloud on Kubernetes                     1.0.1     elastic-cloud-eck.v1.0.0            Succeeded
prometheusoperator.0.32.0           Prometheus Operator                             0.32.0    prometheusoperator.0.27.0           Succeeded
service-telemetry-operator.v1.0.1   Service Telemetry Operator                      1.0.1     service-telemetry-operator.v1.0.0   Succeeded
smart-gateway-operator.v1.0.1       Smart Gateway Operator                          1.0.1     smart-gateway-operator.v1.0.0       Succeeded</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="creating-a-servicetelemetry-object-in-openshift">Creating a ServiceTelemetry object in OKD</h4>
<div class="paragraph">
<p>To deploy the Service Telemetry Framework, you must create an instance of <code>ServiceTelemetry</code> in OKD. By default, <code>eventsEnabled</code> is set to false. If you do not want to store events in ElasticSearch, ensure that <code>eventsEnabled</code> is set to false. For more information, see <a href="#deploying-stf-to-the-openshift-environment-without-elasticsearch">Deploying STF to the OKD environment without ElasticSearch</a>.</p>
</div>
<div class="paragraph">
<p>The core available parameters for a <code>ServiceTelemetry</code> manifest are:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;"/>
<col style="width: 33.3333%;"/>
<col style="width: 33.3334%;"/>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>eventsEnabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{true|false}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable events support in STF. Requires prerequisite steps to ensure ElasticSearch can be started. See <a href="#subscribing-to-elastic-cloud-on-kubernetes-operator">Subscribing to the Elastic Cloud on Kubernetes Operator</a>. Default value is <code>false</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>metricsEnabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{true|false}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable metrics support in STF. Default value is <code>true</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>highAvailabilityEnabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{true|false}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable high availability in STF. For more information, see <a href="#high-availability">[high-availability]</a>. Default value is <code>false</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>storageEphemeralEnabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{true|false}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable ephemeral storage support in STF. For more information, see <a href="#ephemeral-storage">Using ephemeral storage</a>. Default value is <code>false</code>.</p></td>
</tr>
</tbody>
</table>
<h5 id="_procedure_4" class="discrete">Procedure</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>To store events in ElasticSearch, set <code>eventsEnabled</code> to true during deployment:</p>
<div class="listingblock">
<div class="content">
<pre>oc apply -f - &lt;&lt;EOF
apiVersion: infra.watch/v1alpha1
kind: ServiceTelemetry
metadata:
  name: stf-default
  namespace: service-telemetry
spec:
  eventsEnabled: true
  metricsEnabled: true
EOF</pre>
</div>
</div>
</li>
<li>
<p>To view the STF deployment logs in the Service Telemetry Operator, run the <code>oc logs</code> command:</p>
<div class="listingblock">
<div class="content">
<pre>oc logs $(oc get pod --selector='name=service-telemetry-operator' -oname) -c ansible</pre>
</div>
</div>
</li>
<li>
<p>View the pods and the status of the pods to determine that all workloads are operating nominally:</p>
<div class="listingblock">
<div class="content">
<pre>PLAY RECAP *********************************************************************
localhost                  : ok=37   changed=0    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0</pre>
</div>
</div>
</li>
<li>
<p>View the pods and the status of each pod to determine that all workloads are operating nominally:</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If you have set <code>eventsEnabled: true</code> it is expected that the notification Smart Gateways will <code>Error</code> and <code>CrashLoopBackOff</code> for a period of time while ElasticSearch is started.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre>$ oc get pods

NAME                                                              READY   STATUS             RESTARTS   AGE
alertmanager-stf-default-0                                        2/2     Running            0          26m
elastic-operator-645dc8b8ff-jwnzt                                 1/1     Running            0          88m
elasticsearch-es-default-0                                        1/1     Running            0          26m
interconnect-operator-6fd49d9fb9-4bl92                            1/1     Running            0          46m
prometheus-operator-bf7d97fb9-kwnlx                               1/1     Running            0          46m
prometheus-stf-default-0                                          3/3     Running            0          26m
service-telemetry-operator-54f4c99d9b-k7ll6                       2/2     Running            0          46m
smart-gateway-operator-7ff58bcf94-66rvx                           2/2     Running            0          46m
stf-default-ceilometer-notification-smartgateway-6675df547q4lbj   1/1     Running            0          26m
stf-default-collectd-notification-smartgateway-698c87fbb7-xj528   1/1     Running            0          26m
stf-default-collectd-telemetry-smartgateway-79c967c8f7-9hsqn      1/1     Running            0          26m
stf-default-interconnect-7458fd4d69-nqbfs                         1/1     Running            0          26m</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="removing-stf-from-the-openshift-environment_installing-the-core-components-of-stf">Removing STF from the OKD environment</h3>
<div class="paragraph">
<p>To remove STF from an OKD environment, complete the following tasks:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Delete the namespace. For more information, see <a href="#deleting-the-namespace">Deleting the namespace</a>.</p>
</li>
<li>
<p>Delete the OperatorSource. For more information, see <a href="#removing-the-operatorsource">Removing the OperatorSource</a>.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="deleting-the-namespace">Deleting the namespace</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>To remove the operational resources for STF from OKD, delete the namespace:</p>
<div class="listingblock">
<div class="content">
<pre>oc delete project service-telemetry</pre>
</div>
</div>
</li>
<li>
<p>Validate that the resources have been deleted from the namespace:</p>
<div class="listingblock">
<div class="content">
<pre>$ oc get all
No resources found.</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="removing-the-operatorsource">Removing the OperatorSource</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If you do not expect to install Service&#160;Telemetry&#160;Framework again, remove the OperatorSource. When you remove the OperatorSource, PackageManifests related to STF are removed from the Operator Lifecycle Manager catalog.</p>
<div class="listingblock">
<div class="content">
<pre>$ oc delete --namespace=openshift-marketplace operatorsource infrawatch-operators
operatorsource.operators.coreos.com "infrawatch-operators" deleted</pre>
</div>
</div>
</li>
<li>
<p>Validate that the STF PackageManifests are removed from the platform. If successful, the following command returns no result:</p>
<div class="listingblock">
<div class="content">
<pre>$ oc get packagemanifests | grep InfraWatch</pre>
</div>
</div>
</li>
<li>
<p>If you enabled the OperatorHub.io Community Catalog Source during the installation process and you no longer need this catalog source, delete it:</p>
<div class="listingblock">
<div class="content">
<pre>$ oc delete --namespace=openshift-marketplace catalogsource operatorhubio-operators
catalogsource.operators.coreos.com "operatorhubio-operators" deleted</pre>
</div>
</div>
<div class="paragraph">
<p>For more information about the OperatorHub.io Community Catalog Source, see <a href="#deploying-stf-to-the-openshift-environment_installing-the-core-components-of-stf">Deploying STF to the OKD environment</a>.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="completing-the-stf-configuration_installing-the-core-components-of-stf">Completing the Service&#160;Telemetry&#160;Framework configuration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="configuring-openstack-on-the-client-side_completing-the-stf-configuration">Configuring OpenStack on the client side</h3>
<div class="paragraph">
<p>To collect metrics, events, or both, and to send them back to the STF
storage domain, you must install collectd and Apache&#160;Qpid&#160;Dispatch&#160;Router on the nodes of an
OpenStack deployment. If you want to deploy with routed L3 networks, see Deploying with routed L3 networks.</p>
</div>
<div class="sect3">
<h4 id="deploying-with-routed-l3-networks_completing-the-stf-configuration">Deploying with routed L3 networks</h4>
<div class="paragraph">
<p>If your nodes are on a separate network from the default <code>InternalApi</code> network that the Controller nodes use, you must make several changes so that Apache&#160;Qpid&#160;Dispatch&#160;Router can transport data to the STF server instance. This scenario is typical in a Spine and Leaf or a Distributed Compute Node (DCN) topology.</p>
</div>
<div class="paragraph">
<p>Add the following configuration example under the <code>ExtraConfig</code> section for each compute node. In this example, <code>internal_apiN</code> is the network that the Compute node <em>N</em> is connected to, where <em>N</em> represents a value that is different from the default internal API network name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">ComputeNExtraConfig:
   tripleo::profile::base::metrics::collectd::amqp_host: "%{hiera('internal_apiN')}"
   tripleo::profile::base::metrics::qdr::listener_addr: "%{hiera('internal_apiN')}"</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more information about DCN configuration, see the <a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/13/html-single/spine_leaf_networking/">Spine Leaf Networking</a> guide.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuring-red-hat-openstack-platform-overcloud-for-stf_completing-the-stf-configuration">Configuring OpenStack overcloud for STF</h3>
<div class="paragraph">
<p>To configure the OpenStack overcloud, you must configure collectd and Apache&#160;Qpid&#160;Dispatch&#160;Router:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a file and name it <code>stf-connectors.yaml</code>. Save the file in the <code>/home/stack</code> directory.</p>
</li>
<li>
<p>Retrieve the QDR route address for the <code>MetricsQdrConnectors</code> host parameter. For more information, see Retrieving the QDR route address.</p>
</li>
<li>
<p>In the <code>stf-connectors.yaml</code> file, configure the <code>MetricsQdrConnectors</code> address to connect the Apache Qpid Dispatch Router bus on the overcloud to the STF deployment. The following sample is from the <code>stf-connectors.yaml</code> environment file:</p>
<div class="listingblock">
<div class="content">
<pre>parameter_defaults:
    MetricsQdrConnectors:
  - host: qdr-white-port-5671-service-telemetry.apps.service-telemetry.tld
    port: 443
    role: edge
    sslProfile: sslProfile
    verifyHostname: false
  MetricsQdrSSLProfiles:
  - name: sslProfile</pre>
</div>
</div>
</li>
<li>
<p>Add the <code>stf-connectors.yaml</code> environment file to a OpenStackTripleO deployment to configure and setup collectd and Apache&#160;Qpid&#160;Dispatch&#160;Router. Add the <code>enable-stf.yaml</code> file to the deployment to ensure that the environment is being used during the overcloud deployment:</p>
<div class="listingblock">
<div class="content">
<pre>openstack overcloud deploy &lt;other arguments&gt;
-e /usr/share/openstack-tripleo-heat-templates/environments/enable-stf.yaml
-e /home/stack/stf-connectors.yaml
-e &lt;other-environment-files&gt;
     &lt;other configuration files&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="validating-clientside-installation_completing-the-stf-configuration">Validating clientside installation</h3>
<div class="paragraph">
<p>Ensure that collectd is connected to QDR and QDR connected to STF. Use qdstat to validate this. Can also refer to AMQ Interconnect documentation on how to manage AMQ via qdstat.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-stf-components_completing-the-stf-configuration">Configuring Service&#160;Telemetry&#160;Framework data collection</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After you install the Service&#160;Telemetry&#160;Framework (STF) server-side components, configure collectd to collect data and store it on the cloud platform side.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Copy the <code>/usr/share/openstack-tripleo-heat-templates/environments/metrics/collectd-standalone.yaml</code> file to your local directory, for example, /home/templates/custom.  Open the file and set additional parameters in the <code>ExtraConfig</code> section:</p>
<div class="listingblock">
<div class="content">
<pre>parameter_defaults:
   CollectdExtraPlugins:
     - disk
     - df
     - virt

   ExtraConfig:
     collectd::plugin::virt::connection: "qemu:///system"
     collectd::plugin::virt::hostname_format: "hostname uuid"</pre>
</div>
</div>
<div class="paragraph">
<p>By default, collectd includes the <code>disk</code>, <code>interface</code>, <code>load</code>, <code>memory</code>, <code>processes</code>, and <code>tcpconns</code> plug-ins. You can add additional plug-ins using the <code>CollectdExtraPlugins</code> parameter. You can also provide additional configuration information for the <code>CollectdExtraPlugins</code> by using the <code>ExtraConfig</code> option, as shown. The <code>CollectdExtraPlugins</code> example adds the <code>virt</code> plug-in, and configures the connection string and the hostname format.</p>
</div>
</li>
<li>
<p>Include the modified YAML files in the <code>openstack overcloud deploy</code> command:</p>
<div class="listingblock">
<div class="content">
<pre>$ openstack overcloud deploy
--templates /home/templates/environments/collectd.yaml \
-e /home/templates/custom/collectd-standalone.yaml</pre>
</div>
</div>
<div class="paragraph">
<p>To view the collectd plug-ins and configurations, see <a href="#appe-stf-collectd-plugins">collectd plug-ins</a>.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="advanced-features_configuring-stf-components">Advanced features</h2>
<div class="sectionbody">
<div id="advanced-features_advanced-features" class="paragraph">
<p>The following features are optional but can provide additional functionality to the Service Telemetry Framework:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Alerts. For more information, see <a href="#alerts_advanced-features">Alerts</a>.</p>
</li>
<li>
<p>High availability. For more information, see <a href="#high-availability_advanced-features">High availability</a>.</p>
</li>
<li>
<p>Dashboards. For more information, see <a href="#dashboards_advanced-features">Dashboards</a>.</p>
</li>
<li>
<p>Multiple clouds. For more information, see <a href="#configuring-multiple-clouds_advanced-features">Configuring multiple clouds</a>.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="alerts_advanced-features">Alerts</h3>
<div class="paragraph">
<p>Alerting with Prometheus is separated into two parts. First, alerting rules in Prometheus servers send alerts to an Alertmanager. Second, the Alertmanager manages the alerts, including silencing, inhibition, aggregation, and sending out notifications using email, on-call notification systems, or chat platforms. You can configure alerts to receive notifications, for example, when the load average of a node gets higher than 1.0 or when a disk is almost full.</p>
</div>
<div class="paragraph">
<p>To create an alert, complete the following tasks:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create an alert rule in Prometheus. For more information, see <a href="#creating-an-alert-rule-in-prometheus_advanced-features">Creating an alert rule in Prometheus</a>.</p>
</li>
<li>
<p>Create an alert route in Alertmanager. For more information, see <a href="#creating-an-alert-route-in-alertmanager_advanced-features">Creating an alert route in Alertmanager</a>.</p>
</li>
</ol>
</div>
<h4 id="_additional_resources" class="discrete">Additional resources</h4>
<div class="paragraph">
<p>For more information about alerts or notifications with Prometheus and Alertmanager, see <a href="https://prometheus.io/docs/alerting/overview/" class="bare">https://prometheus.io/docs/alerting/overview/</a></p>
</div>
<div class="paragraph">
<p>To view an example set of alerts that you can use with STF, see <a href="https://github.com/infrawatch/service-telemetry-operator/tree/master/deploy/alerts" class="bare">https://github.com/infrawatch/service-telemetry-operator/tree/master/deploy/alerts</a></p>
</div>
<div class="sect3">
<h4 id="creating-an-alert-rule-in-prometheus_advanced-features">Creating an alert rule in Prometheus</h4>
<div class="paragraph">
<p>Prometheus evaluates alert rules to trigger notifications. If the rule condition returns an empty result set, the condition is false. Otherwise, the rule is true and it triggers an alert.</p>
</div>
<h5 id="_procedure_5" class="discrete">Procedure</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a YAML file for the alert rule. The following example in <code>qpid-router-down.yaml</code> is a small, efficient alerting rule:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  creationTimestamp: null
  labels:
    prometheus: stf-default
    role: alert-rules
  name: prometheus-alarm-rules
  namespace: service-telemetry
spec:
  groups:
    - name: ./openstack.rules
      rules:
        - alert: Metric Listener down
          expr: collectd_qpid_router_status &lt; 1 # To change the rule, edit the value of the expr parameter.</code></pre>
</div>
</div>
</li>
<li>
<p>Create an alerting rule in OpenShift:</p>
<div class="listingblock">
<div class="content">
<pre>oc create -f qpid-router-down.yaml</pre>
</div>
</div>
<div class="paragraph">
<p>This command creates a PrometheusRule object named <code>prometheus-alarm-rules</code> and a rule in Prometheus.</p>
</div>
</li>
</ol>
</div>
<h5 id="_additional_resources_2" class="discrete">Additional resources</h5>
<div class="paragraph">
<p>For more information on alerting, see <a href="https://github.com/coreos/prometheus-operator/blob/master/Documentation/user-guides/alerting.md" class="bare">https://github.com/coreos/prometheus-operator/blob/master/Documentation/user-guides/alerting.md</a></p>
</div>
</div>
<div class="sect3">
<h4 id="configuring-custom-alerts_advanced-features">Configuring custom alerts</h4>
<div class="paragraph">
<p>You can edit the PrometheusRule that you created in <a href="#creating-an-alert-rule-in-prometheus_advanced-features">Creating an alert rule in Prometheus</a>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Use the <code>oc edit</code> command:</p>
<div class="listingblock">
<div class="content">
<pre>oc edit prometheusrules/prometheus-alarm-rules</pre>
</div>
</div>
</li>
<li>
<p>Adjust the PrometheusRules manifest. For more information about configuring alerting rules, see <a href="https://prometheus.io/docs/prometheus/latest/configuration/alerting_rules/" class="bare">https://prometheus.io/docs/prometheus/latest/configuration/alerting_rules/</a>. For more information about prometheusrules objects, see <a href="https://github.com/coreos/prometheus-operator/blob/master/Documentation/user-guides/alerting.md" class="bare">https://github.com/coreos/prometheus-operator/blob/master/Documentation/user-guides/alerting.md</a></p>
</li>
<li>
<p>Save and close.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="creating-an-alert-route-in-alertmanager_advanced-features">Creating an alert route in Alertmanager</h4>
<div class="paragraph">
<p>Use Alertmanager to deliver alerts to an external system, for example, email, IRC, or other notification channel. The Alertmanager configuration is managed as an OpenShift secret by the Prometheus Operator. Alertmanager comes with a basic configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>          global:
            resolve_timeout: 5m
          route:
            group_by: ['job']
            group_wait: 30s
            group_interval: 5m
            repeat_interval: 12h
            receiver: 'null'
          receivers:
          - name: 'null'</pre>
</div>
</div>
<div class="paragraph">
<p>To add an alert route to Alertmanager, you must delete the previous Alertmanager configuration secret and create a new Alertmanager configuration secret with the same name.</p>
</div>
<h5 id="_procedure_6" class="discrete">Procedure</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to OpenShift.</p>
</li>
<li>
<p>Navigate to the <code>service-telemetry</code> namespace:</p>
<div class="listingblock">
<div class="content">
<pre>oc project service-telemetry</pre>
</div>
</div>
</li>
<li>
<p>Delete the existing secret:</p>
<div class="listingblock">
<div class="content">
<pre>oc delete secret alertmanager-stf-default</pre>
</div>
</div>
</li>
<li>
<p>Create the new Alertmanager configuration secret:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">oc apply -f - &lt;&lt;EOF
apiVersion: v1
kind: Secret
metadata:
  name: alertmanager-stf-default
  namespace: service-telemetry
type: Opaque
stringData:
  alertmanager.yaml: |-
    global:
      resolve_timeout: 5m
    route:
      group_by: ['job']
      group_wait: 30s
      group_interval: 5m
      repeat_interval: 12h
      receiver: 'webhook' # Replace webhook with your receiver type.

      routes:
      - match:
          severity: critical
        receiver: 'webhook-crit' # Replace webhook with your receiver type.
      - match_re:
          severity: !(critical)
        receiver: 'webhook' # Replace webhook with your receiver type.
    templates:
    - '*.tmpl'
    receivers: # Edit this section to suit the configuration of your receiver type.
    - name: 'webhook'
      webhook_configs:
      - url: http://192.168.36.9/webhook
    - name: 'webhook-crit'
      webhook_configs:
      - url: http://192.168.36.9/webhook-crit
    EOF</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example creates two webhook receivers that trigger alarms on different severities. Edit the parameters in the example to suit your requirements. For more information on configuration, see <a href="https://prometheus.io/docs/alerting/configuration/" class="bare">https://prometheus.io/docs/alerting/configuration/</a>.</p>
</div>
</li>
<li>
<p>Save the file and run the following command:</p>
<div class="listingblock">
<div class="content">
<pre>oc apply -f &lt;filename&gt;</pre>
</div>
</div>
</li>
<li>
<p>Restart Alertmanager:</p>
<div class="listingblock">
<div class="content">
<pre>oc delete pod alertmanager-stf-default-0</pre>
</div>
</div>
<div class="paragraph">
<p>The Prometheus Operator restarts Alertmanager automatically.</p>
</div>
</li>
<li>
<p>To validate that the manifest loaded correctly, run the following command:</p>
<div class="listingblock">
<div class="content">
<pre>oc get prometheusrules</pre>
</div>
</div>
</li>
<li>
<p>To validate that the rule loaded into Prometheus, run the following command:</p>
<div class="listingblock">
<div class="content">
<pre>oc</pre>
</div>
</div>
</li>
</ol>
</div>
<h5 id="_additional_resources_3" class="discrete">Additional resources</h5>
<div class="paragraph">
<p>For more information about the OpenShift secret and the Prometheus operator, see <a href="https://github.com/coreos/prometheus-operator/blob/master/Documentation/user-guides/alerting.md" class="bare">https://github.com/coreos/prometheus-operator/blob/master/Documentation/user-guides/alerting.md</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="high-availability_advanced-features">High availability</h3>
<div class="paragraph">
<p>High availability is the ability of Service&#160;Telemetry&#160;Framework to rapidly recover from failures in its component services. While OpenShift restarts a failed pod if nodes are available to schedule the workload, this recovery process might take more than one minute, during which time events and metrics are lost. When you deploy in a high availability configuration, there are multiple copies of STF components, reducing recovery time to approximately 2 seconds. To protect against failure of an OKD node, it is recommended that you deploy STF to an OKD cluster with three or more nodes.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
STF is not yet a fully fault tolerant system. Delivery of metrics and events during the recovery period is not guaranteed.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Enabling high availability has the following effects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Two Apache&#160;Qpid&#160;Dispatch&#160;Router pods run instead of the default 1.</p>
</li>
<li>
<p>Three ElasticSearch pods run instead of the default 1.</p>
</li>
<li>
<p>Recovery time from a lost pod in either of these services reduces to approximately 2 seconds.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
High availability for the Smart Gateway and Prometheus components of STF is a work in progress.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="configuring-high-availability_advanced-features">Configuring high availability</h4>
<div class="paragraph">
<p>To configure STF for high availability, you must add the <code>highAvailabilityEnabled: true</code> parameter to the ServiceTelemetry object in OKD. You can this set this parameter at installation time or, if you already deployed STF, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Use the oc command to edit the ServiceTelemetry object:</p>
<div class="listingblock">
<div class="content">
<pre>    oc edit ServiceTelemetry</pre>
</div>
</div>
</li>
<li>
<p>Add the <code>highAvailabilityEnabled: true</code> parameter to the <code>spec</code> section:</p>
<div class="listingblock">
<div class="content">
<pre>spec:
  eventsEnabled: true
  metricsEnabled: true
  highAvailabilityEnabled: true</pre>
</div>
</div>
</li>
<li>
<p>Save your changes and close the object.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="dashboards_advanced-features">Dashboards</h3>
<div class="paragraph">
<p>Use third-party application Grafana to visualize system-level metrics gathered by collectd for each individual host node. For more information about configuring collectd, see <a href="#configuring-red-hat-openstack-overcloud-for-stf_completing-the-stf-configuration">[configuring-red-hat-openstack-overcloud-for-stf_completing-the-stf-configuration]</a> .</p>
</div>
<div class="sect3">
<h4 id="setting-up-the-dashboard-to-host-grafana_advanced-features">Setting up the dashboard to host Grafana</h4>
<div class="paragraph">
<p>Grafana is not included in the default Service&#160;Telemetry&#160;Framework (STF) deployment so you must deploy the Grafana Operator from OperatorHub.io. For more information about enabling the OperatorHub.io catalog source, see <a href="#enabling-the-operatorhubio-community-catalog-source">Enabling the OperatorHub.io Community Catalog Source</a>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clone the dashboard repository.</p>
<div class="listingblock">
<div class="content">
<pre>git clone https://github.com/infrawatch/dashboards
cd dashboards</pre>
</div>
</div>
</li>
<li>
<p>Change to the <code>service-telemetry</code> namespace and deploy the Grafana operator:</p>
<div class="listingblock">
<div class="content">
<pre>oc project service-telemetry
oc create -f deploy/subscription.yaml</pre>
</div>
</div>
</li>
<li>
<p>Launch a Grafana instance:</p>
<div class="listingblock">
<div class="content">
<pre>oc create -f deploy/grafana.yaml</pre>
</div>
</div>
</li>
<li>
<p>Create the datasource and dashboard resources:</p>
<div class="listingblock">
<div class="content">
<pre>oc create -f deploy/datasource.yaml \
    -f deploy/rhos-dashboard.yaml</pre>
</div>
</div>
</li>
<li>
<p>Navigate to <a href="https://&lt;grafana-route-address&gt" class="bare">https://&lt;grafana-route-address&gt</a>; in a web browser. Use <code>oc get routes</code> to retrieve the Grafana route address:</p>
<div class="listingblock">
<div class="content">
<pre>oc get routes</pre>
</div>
</div>
</li>
<li>
<p>To view the dashboard, click <strong>Dashboards</strong> and <strong>Manage</strong>.</p>
</li>
</ol>
</div>
<div class="sect4">
<h5 id="_viewing_and_editing_queries">Viewing and editing queries</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>To view and edit queries, log in as user <code>admin</code>.</p>
</li>
<li>
<p>To retrieve the default username and password, describe the Grafana object using <code>oc describe</code>:</p>
<div class="listingblock">
<div class="content">
<pre>oc describe grafana service-telemetry-grafana</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="operating-the-dashboard_advanced-features">Operating the dashboard</h4>
<div class="paragraph">
<p>The infrastructure dashboard shows metrics for a single node at a time. Select a node from the upper left corner of the dashboard.</p>
</div>
<div class="sect4">
<h5 id="_top_panels">Top panels</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;"/>
<col style="width: 33.3333%;"/>
<col style="width: 33.3334%;"/>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Title</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Unit</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Current Global Alerts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Current alerts fired by Prometheus</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Recent Global Alerts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Recently fired alerts in 5m time steps</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status Panel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Node status: up, down, unavailable</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uptime</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">s/m/h/d/M/Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total operational time of node</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CPU Cores</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cores</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total number of cores</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Memory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bytes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total memory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disk Size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bytes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total storage size</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Processes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">processes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total number of processes listed by type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Load Average</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">processes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Load average represents the average number of running and uninterruptible processes residing in the kernel execution queue.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_networking_panels">Networking panels</h5>
<div class="paragraph">
<p>Panels pertaining to the network interfaces of the node.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;"/>
<col style="width: 33.3333%;"/>
<col style="width: 33.3334%;"/>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Panel</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Unit</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Physical Interfaces Ingress Errors</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">errors</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total errors with incoming data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Physical Interfaces Egress Errors</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">errors</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total errors with outgoing data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Physical Interfaces Ingress Error Rates</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">errors/s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rate of incoming data errors</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Physical Interfaces egress Error Rates</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">errors/s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rate of outgoing data errors</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Physical Interfaces Packets Ingress
pps
Incoming packets per second</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Physical Interfaces Packets Egress</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pps</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outgoing packets per second</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Physical Interfaces Data Ingress</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bytes/s</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Incoming data rates</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Physical Interfaces Data Egress</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bytes/s</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outgoing data rates</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Physical Interfaces Drop Rate Ingress</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pps</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Incoming packets drop rate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Physical Interfaces Drop Rate Egress</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pps</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_cpu_panels">CPU panels</h5>
<div class="paragraph">
<p>Panels pertaining to CPU usage of the node.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;"/>
<col style="width: 33.3333%;"/>
<col style="width: 33.3334%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Panel</strong></th>
<th class="tableblock halign-left valign-top"><strong>Unit</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Current CPU Usage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">percent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Instantaneous usage at the time of the last query</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aggregate CPU Usage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">percent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Average non-idle CPU activity of all cores on node</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aggr. CPU Usage by Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">percent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shows time spent for each type of thread averaged across all cores</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_memory_panels">Memory panels</h5>
<div class="paragraph">
<p>Panels pertaining to memory usage on the node.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;"/>
<col style="width: 33.3333%;"/>
<col style="width: 33.3334%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Panel</strong></th>
<th class="tableblock halign-left valign-top"><strong>Unit</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Memory Used</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">percent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Amount of memory being used at time of last query</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Huge Pages Used</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hugepages</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of hugepages being used</p>
<p class="tableblock">Memory</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_diskfile_system">Disk/file system</h5>
<div class="paragraph">
<p>Panels pertaining to space used on disk.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;"/>
<col style="width: 25%;"/>
<col style="width: 25%;"/>
<col style="width: 25%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Panel</strong></th>
<th class="tableblock halign-left valign-top"><strong>Unit</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
<th class="tableblock halign-left valign-top"><strong>Notes</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disk Space Usage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">percent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total disk use at time of last query</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inode Usage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">percent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total inode use at time of last query</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aggregate Disk Space Usage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bytes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total disk space used and reserved.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Because this query relies on the <code>df</code> plugin, temporary file systems that do not necessarily use disk space are included in the results. The query tries to filter out most of these, but it might not be exhaustive</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disk Traffic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bytes/s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shows rates for both reading and writing.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disk Load</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">percent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Approximate percentage of total disk bandwidth being used.
The weighted I/O time series includes the backlog that might be accumulating. For more information, see the collectd <a href="https://collectd.org/wiki/index.php/Plugin:Disk">disk plugin docs</a></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operations/s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ops/s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operations done per second</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Average I/O Operation Time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">seconds</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Average time each I/O operation took to complete. Per the collectd <a href="https://collectd.org/wiki/index.php/Plugin:Disk">disk plugin docs</a>, this average is not accurate.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuring-multiple-clouds_advanced-features">Configuring multiple clouds</h3>
<div class="paragraph">
<p>To configure multiple OpenStack clouds to target a single instance of Service&#160;Telemetry&#160;Framework (STF), complete the following tasks:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Plan the AMQP address prefixes to use for each cloud. For more information, see <a href="#planning-amqp-address-prefixes_advanced-features">Planning AMQP address prefixes</a>.</p>
</li>
<li>
<p>Deploy metrics and events consumer Smart Gateways for each cloud to listen on
the corresponding address prefixes. For more information, see <a href="#deploying-smart-gateways_advanced-features">Deploying Smart Gateways</a>.</p>
</li>
<li>
<p>Optional: Delete the default Smart Gateways if they are no longer needed. For more information, see <a href="#deleting-the-default-smart-gateways_advanced-features">Deleting the default Smart Gateways</a>.</p>
</li>
<li>
<p>Configure each cloud to send its metrics and events to STF on the
correct address. For more information, see <a href="#updating-collectd-configuration_advanced-features">Updating collectd configuration</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This diagram demonstrates how two OpenStack clouds connect to STF.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/OpenStack_STF_Overview_37_0919_topology.png" alt="OpenStack STF Overview 37 0919 topology"/>
</div>
</div>
<div class="sect3">
<h4 id="planning-amqp-address-prefixes_advanced-features">Planning AMQP address prefixes</h4>
<div class="paragraph">
<p>By default, OpenStack nodes send data to the <code>collectd/telemetry</code> and <code>collectd/notify</code> addresses on the AMQP bus and STF listens on those addresses for monitoring data. To support multiple clouds and to identify which cloud generated the monitoring data, configure each cloud to send data to a unique address. It is recommended that you prefix a cloud identifier to the second part of the
address. The following example list shows some of the addresses and identifiers you can include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>collectd/cloud1-telemetry</p>
</li>
<li>
<p>collectd/cloud1-notify</p>
</li>
<li>
<p>collectd/cloud2-telemetry</p>
</li>
<li>
<p>collectd/cloud2-notify</p>
</li>
<li>
<p>collectd/us-east-1-telemetry</p>
</li>
<li>
<p>collectd/us-west-3-telemetry</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="deploying-smart-gateways_advanced-features">Deploying Smart Gateways</h4>
<div class="paragraph">
<p>You must deploy two Smart Gateways for each cloud; one for metrics and one for events. Configure both Smart Gateways to listen on the AMQP address that you define for the corresponding cloud.</p>
</div>
<div class="paragraph">
<p>When you deploy STF for the first time, two Smart Gateway manifests are created that define the two initial Smart Gateways for a single cloud. When you deploy multiple Smart Gateways, you must edit these manifests to define the Smart Gateways that handle the metrics and the events data for each cloud.</p>
</div>
<div class="paragraph">
<p>To deploy multiple Smart Gateways, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Copy the following Smart Gateway manifests and edit them to define a Smart Gateway for each cloud: <code>deploy/service-telemetry/smartgateway/metrics-smartgateway.yaml</code> and <code>deploy/service-telemetry/smartgateway/events-smartgateway.yaml</code>. For more information, see <a href="#example-manifests_advanced-features">Example manifests</a>.</p>
<div class="listingblock">
<div class="content">
<pre>pushd deploy/service-telemetry/smartgateway/
cp events-smartgateway.yaml events-smartgateway-multicloud.yaml
cp metrics-smartgateway.yaml metrics-smartgateway-multicloud.yaml
vi events-smartgateway-multicloud.yaml metrics-smartgateway-multicloud.yaml
popd</pre>
</div>
</div>
</li>
<li>
<p>Deploy your new Smart Gateways.</p>
<div class="listingblock">
<div class="content">
<pre>oc create -f deploy/service-telemetry/smartgateway/</pre>
</div>
</div>
</li>
<li>
<p>Verify that each Smart Gateway is running. This can take several minutes
depending on the number of Smart Gateways.</p>
<div class="listingblock">
<div class="content">
<pre>oc get po -l app=smart-gateway</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="sect4">
<h5 id="example-manifests_advanced-features">Example manifests</h5>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
The content in the following examples might be different to the file content in your deployment. Copy the manifests in your deployment.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Ensure that the <code>name</code> and <code>amqp_url</code> parameters of each Smart Gateway match the names you want to use for your clouds. For more information, see <a href="#planning-amqp-address-prefixes_advanced-features">Planning AMQP address prefixes</a>.</p>
</div>
<div class="listingblock">
<div class="title">metrics-smartgateway.yaml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">  apiVersion: smartgateway.infra.watch/v1alpha1
  kind: SmartGateway
  metadata:
    name: cloud1-telemetry
  spec:
    size: 1
    amqp_url: qdr-white.service-telemetry.svc.cluster.local:5672/collectd/cloud1-telemetry
    debug: "false"
    container_image_path: "docker-registry.default.svc:5000/service-telemetry/smart-gateway:latest"
    service_type: "metrics"

  ---
  apiVersion: smartgateway.infra.watch/v1alpha1
  kind: SmartGateway
  metadata:
    name: cloud2-telemetry
  spec:
    size: 1
    amqp_url: qdr-white.service-telemetry.svc.cluster.local:5672/collectd/cloud2-telemetry
    debug: "false"
    container_image_path: "docker-registry.default.svc:5000/service-telemetry/smart-gateway:latest"
    service_type: "metrics"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">events-smartgateway.yaml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">  apiVersion: smartgateway.infra.watch/v1alpha1
  kind: SmartGateway
  metadata:
    name: cloud1-notify
  spec:
    size: 1
    amqp_url: "qdr-white.service-telemetry.svc.cluster.local:5672/collectd/cloud1-notify"
    service_type: events
    debug: "false"
    elastic_url: "https://elasticsearch.service-telemetry.svc:9200"
    container_image_path: docker-registry.default.svc:5000/sa-telemetry/smart-gateway:latest
    use_tls: "true"
    tls_client_cert: /config/certs/admin-cert
    tls_client_key: /config/certs/admin-key
    tls_ca_cert: /config/certs/admin-ca
    reset_index: "true"

  ---
  apiVersion: smartgateway.infra.watch/v1alpha1
  kind: SmartGateway
  metadata:
    name: cloud2-notify
  spec:
    size: 1
    amqp_url: "qdr-white.service-telemetry.svc.cluster.local:5672/collectd/cloud2-notify"
    service_type: events
    debug: "false"
    elastic_url: "https://elasticsearch.service-telemetry.svc:9200"
    container_image_path: docker-registry.default.svc:5000/sa-telemetry/smart-gateway:latest
    use_tls: "true"
    tls_client_cert: /config/certs/admin-cert
    tls_client_key: /config/certs/admin-key
    tls_ca_cert: /config/certs/admin-ca
    reset_index: "true"</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="deleting-the-default-smart-gateways_advanced-features">Deleting the default Smart Gateways</h4>
<div class="paragraph">
<p>When you have configured STF for multiple clouds, you can delete the
default Smart Gateways if they are no longer in use.</p>
</div>
<div class="paragraph">
<p>To delete the Smart Gateways, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Delete the default Smart Gateways from the cluster:</p>
<div class="listingblock">
<div class="content">
<pre>oc delete smartgateway cloud1-notify cloud1-telemetry</pre>
</div>
</div>
</li>
<li>
<p>Optional: Delete the default manifests:</p>
<div class="listingblock">
<div class="content">
<pre>rm deploy/service-telemetry/smartgateway/{events,metrics}-smartgateway.yaml</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="updating-collectd-configuration_advanced-features">Updating collectd configuration</h4>
<div class="paragraph">
<p>To label traffic according to the cloud of origin, you must update the collectd configuration with cloud-specific instance names.  Edit your OpenStack&#160;Queens TripleO configuration to include the following <code>CollectdAmqpInstances</code>.</p>
</div>
<div class="listingblock">
<div class="title">metrics-collectd-qdr.yaml</div>
<div class="content">
<pre>parameter_defaults:
   CollectdAmqpInstances:
       cloud1-telemetry:
           format: JSON
           presettle: true
       cloud1-notify:
           notify: true
           format: JSON
           presettle: false</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="querying-metrics-data-from-multiple-clouds_advanced-features">Querying metrics data from multiple clouds</h4>
<div class="paragraph">
<p>Data stored in Prometheus has a "service" label attached according to the
Smart Gateway it was scraped from. You can use this label to query data from a
specific cloud.</p>
</div>
<div class="paragraph">
<p>To query data from a specific cloud, use a Prometheus <code>promql</code> query that matches the associated "service" label; for example: <code>collectd_uptime{service="cloud1-smartgateway"}</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="using-the-amq-interconnect-message-bus_advanced-features">Using the Apache&#160;Qpid&#160;Dispatch&#160;Router message bus</h4>
<div class="paragraph">
<p>To use Apache&#160;Qpid&#160;Dispatch&#160;Router, see the
<a href="https://access.redhat.com/documentation/en-us/red_hat_amq/7.0/html-single/using_amq_interconnect/index">Using AMQ Interconnect</a> guide.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ephemeral-storage_advanced-features">Ephemeral Storage</h3>
<div class="paragraph">
<p>Use ephemeral storage to run {ProjectShort) without persistently storing data in your OKD cluster.  Ephemeral storage is not recommended in a production environment due to the volatility of the data in the platform when operating correctly and as designed. For example, restarting a pod or rescheduling the workload to another node results in the loss of any local data written since the pod started.</p>
</div>
<div class="paragraph">
<p>Enabling ephemeral storage in STF results in the relevant <code>storage</code> sections not being added to the data storage components manifests by the Service Telemetry Operator.</p>
</div>
<div class="sect3">
<h4 id="configuring-ephemeral-storage_advanced-features">Configuring ephemeral storage</h4>
<div class="paragraph">
<p>To configure STF for ephemeral storage, you must add the <code>storageEphemeralEnabled: true</code> parameter to the ServiceTelemetry object in OKD. You can set this parameter at installation time or, if you already deployed STF, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Use the oc command to edit the ServiceTelemetry object:</p>
<div class="listingblock">
<div class="content">
<pre>    oc edit ServiceTelemetry</pre>
</div>
</div>
</li>
<li>
<p>Add the <code>storageEphemeralEnabled: true</code> parameter to the <code>spec</code> section:</p>
<div class="listingblock">
<div class="content">
<pre>spec:
  eventsEnabled: true
  metricsEnabled: true
  storageEphemeralEnabled: true</pre>
</div>
</div>
</li>
<li>
<p>Save your changes and close the object.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="manifest-overrides_advanced-features">Customizing The Deployment</h3>
<div class="paragraph">
<p>The Service Telemetry Operator watches for a <code>ServiceTelemetry</code> manifest to be loaded into OKD which then creates other objects in memory to result in the dependent Operators creating the workloads they are responsible for managing.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
When overriding the manifest the entire manifest contents including object names or namespaces must be provided. No dynamic parameter substitution will be done when overriding manifests.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To override manifests in a way that works with STF, deploy a default environment using the core options only. For more information about the core options, see <a href="#creating-a-servicetelemetry-object-in-openshift">Creating a ServiceTelemetry object in OKD</a>. When deploying STF, use the <code>oc get</code> command to retrieve the default deployed manifest. Using a manifest originally generated by Service Telemetry Operator helps to keep manifests compatible with the other objects that are managed by the Operators.</p>
</div>
<div class="paragraph">
<p>For example, when the <code>metricsEnabled: true</code> parameter is configured in the <code>ServiceTelemetry</code> manifest, the Service Telemetry Operator will request components for metrics retrieval and storage using the default manifests. In some cases however you may want to override the default manifest. The available manifest override parameters available are:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;"/>
<col style="width: 33.3333%;"/>
<col style="width: 33.3334%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Override Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Retrieval command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>alertmanagerManifest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Override the <code>Alertmanager</code> object creation. The Prometheus Operator watches for <code>Alertmanager</code> objects.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>oc get alertmanager stf-default -oyaml</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>alertmanagerConfigManifest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Override the <code>Secret</code> that contains the Alertmanager configuration. The Prometheus Operator uses a secret named <code>alertmanager-{{ alertmanager-name }}</code> (for example, <code>stf-default</code>) to provide the <code>alertmanager.yaml</code> configuration to to Alertmanager.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>oc get secret alertmanager-stf-default -oyaml</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>elasticsearchManifest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Override the <code>ElasticSearch</code> object creation. The Elastic Cloud on Kuberneters Operator watches for <code>ElasticSearch</code> objects.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>oc get elasticsearch elasticsearch -oyaml</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>interconnectManifest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Override the <code>Interconnect</code> object creation. The AMQ Interconnect Operator watches for <code>Interconnect</code> objects.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>oc get interconnect stf-default-interconnect -oyaml</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prometheusManifest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Override the <code>Prometheus</code> object creation. The Prometheus Operator watches for <code>Prometheus</code> objects.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>oc get prometheus stf-default -oyaml</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>servicemonitorManifest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Override the <code>ServiceMonitor</code> object creation. The Prometheus Operator watches for <code>ServiceMonitor</code> objects.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>oc get servicemonitor stf-default -oyaml</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>smartgatewayCollectdMetricsManifest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Override the <code>SmartGateway</code> object creation for collectd metrics. The Smart Gateway Operator watches for <code>SmartGateway</code> objects.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>oc get smartgateway stf-default-collectd-telemetry -oyaml</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>smartgatewayCollectdEventsManifest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Override the <code>SmartGateway</code> object creation for collectd events. The Smart Gateway Operator watches for <code>SmartGateway</code> objects.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>oc get smartgateway stf-default-collectd-notification -oyaml</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>smartgatewayCeilometerEventsManifest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Override the <code>SmartGateway</code> object creation for Ceilometer events. The Smart Gateway Operator watches for <code>SmartGateway</code> objects.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>oc get smartgateway stf-default-ceilometer-notification -oyaml</code></p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="configuring-manifest-overrides_advanced-features">Overriding a managed manifest</h4>
<div class="paragraph">
<p>Edit the <code>ServiceTelmetry</code> object and provide a parameter and manifest. For a list of available manifest override parameters, see <a href="#manifest-overrides">[manifest-overrides]</a>. The default <code>ServiceTelemetry</code> object is <code>stf-default</code>. Use <code>oc get servicetelemetry</code> to list the available STF deployments.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
The <code>oc edit</code> command will load the default system editor. To override the default editor pass or set the environment variable <code>EDITOR</code> to the preferred editor. For example, <code>EDITOR=nano oc edit servicetelemetry stf-default</code>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Use the <code>oc edit</code> command to load the <code>ServiceTelemetry</code> object into an editor:</p>
<div class="listingblock">
<div class="content">
<pre>oc edit servicetelemetry stf-default</pre>
</div>
</div>
</li>
<li>
<p>Modify the <code>ServiceTelemetry</code> object by providing a manifest override parameter and the contents of the manifest to write to OKD instead of the defaults provided by STF.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Be aware of the trailing pipe (<code>|</code>) after entering the manifest override parameter which signals the value provided is multi-line.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre>$ oc edit servicetelemetry stf-default

apiVersion: infra.watch/v1alpha1
kind: ServiceTelemetry
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"infra.watch/v1alpha1","kind":"ServiceTelemetry","metadata":{"annotations":{},"name":"stf-default","namespace":"service-telemetry"},"spec":{metricsEnabled":true}}
  creationTimestamp: "2020-04-14T20:29:42Z"
  generation: 1
  name: stf-default
  namespace: service-telemetry
  resourceVersion: "1949423"
  selfLink: /apis/infra.watch/v1alpha1/namespaces/service-telemetry/servicetelemetrys/stf-default
  uid: d058bc41-1bb0-49f5-9a8b-642f4b8adb95
spec:
  metricsEnabled: true
  smartgatewayCollectdMetricsManifest: | # <b class="conum">(1)</b>
    apiVersion: smartgateway.infra.watch/v2alpha1
    kind: SmartGateway
    metadata:
      name: stf-default-collectd-telemetry
      namespace: service-telemetry
    spec:
      amqpUrl: stf-default-interconnect.service-telemetry.svc.cluster.local:5672/collectd/telemetry
      debug: true
      prefetch: 15000
      serviceType: metrics
      size: 1
      useTimestamp: true # <b class="conum">(2)</b>
status:
  conditions:
  - ansibleResult:
      changed: 0
      completion: 2020-04-14T20:32:19.079508
      failures: 0
      ok: 52
      skipped: 1
    lastTransitionTime: "2020-04-14T20:29:59Z"
    message: Awaiting next reconciliation
    reason: Successful
    status: "True"
    type: Running</pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Manifest override parameter is defined in the <code>spec</code> of the <code>ServiceTelemetry</code> object.</p>
</li>
<li>
<p>End of the manifest override content.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Save and close.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="appe-stf-collectd-plugins">Appendix A: collectd plug-ins</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section contains a complete list of collectd plug-ins and configurations for OpenStack Queens.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">collectd-aggregation</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::aggregation::aggregators</p>
</li>
<li>
<p>collectd::plugin::aggregation::interval</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>collectd-amqp1</strong></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">collectd-apache</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::apache::instances (ex.: {<em>localhost</em> &#8658; {<em>url</em> &#8658; <em><a href="http://localhost/mod_status?auto" class="bare">http://localhost/mod_status?auto</a></em>}})</p>
</li>
<li>
<p>collectd::plugin::apache::interval</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>collectd-apcups</strong></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">collectd-battery</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::battery::values_percentage</p>
</li>
<li>
<p>collectd::plugin::battery::report_degraded</p>
</li>
<li>
<p>collectd::plugin::battery::query_state_fs</p>
</li>
<li>
<p>collectd::plugin::battery::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-ceph</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::ceph::daemons</p>
</li>
<li>
<p>collectd::plugin::ceph::longrunavglatency</p>
</li>
<li>
<p>collectd::plugin::ceph::convertspecialmetrictypes</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-cgroups</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::cgroups::ignore_selected</p>
</li>
<li>
<p>collectd::plugin::cgroups::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-conntrack</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>None</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-contextswitch</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::contextswitch::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-cpu</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::cpu::reportbystate</p>
</li>
<li>
<p>collectd::plugin::cpu::reportbycpu</p>
</li>
<li>
<p>collectd::plugin::cpu::valuespercentage</p>
</li>
<li>
<p>collectd::plugin::cpu::reportnumcpu</p>
</li>
<li>
<p>collectd::plugin::cpu::reportgueststate</p>
</li>
<li>
<p>collectd::plugin::cpu::subtractgueststate</p>
</li>
<li>
<p>collectd::plugin::cpu::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-cpufreq</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>None</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>collectd-cpusleep</strong></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">collectd-csv</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::csv::datadir</p>
</li>
<li>
<p>collectd::plugin::csv::storerates</p>
</li>
<li>
<p>collectd::plugin::csv::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-df</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::df::devices</p>
</li>
<li>
<p>collectd::plugin::df::fstypes</p>
</li>
<li>
<p>collectd::plugin::df::ignoreselected</p>
</li>
<li>
<p>collectd::plugin::df::mountpoints</p>
</li>
<li>
<p>collectd::plugin::df::reportbydevice</p>
</li>
<li>
<p>collectd::plugin::df::reportinodes</p>
</li>
<li>
<p>collectd::plugin::df::reportreserved</p>
</li>
<li>
<p>collectd::plugin::df::valuesabsolute</p>
</li>
<li>
<p>collectd::plugin::df::valuespercentage</p>
</li>
<li>
<p>collectd::plugin::df::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-disk</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::disk::disks</p>
</li>
<li>
<p>collectd::plugin::disk::ignoreselected</p>
</li>
<li>
<p>collectd::plugin::disk::udevnameattr</p>
</li>
<li>
<p>collectd::plugin::disk::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-entropy</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::entropy::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-ethstat</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::ethstat::interfaces</p>
</li>
<li>
<p>collectd::plugin::ethstat::maps</p>
</li>
<li>
<p>collectd::plugin::ethstat::mappedonly</p>
</li>
<li>
<p>collectd::plugin::ethstat::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-exec</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::exec::commands</p>
</li>
<li>
<p>collectd::plugin::exec::commands_defaults</p>
</li>
<li>
<p>collectd::plugin::exec::globals</p>
</li>
<li>
<p>collectd::plugin::exec::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-fhcount</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::fhcount::valuesabsolute</p>
</li>
<li>
<p>collectd::plugin::fhcount::valuespercentage</p>
</li>
<li>
<p>collectd::plugin::fhcount::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-filecount</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::filecount::directories</p>
</li>
<li>
<p>collectd::plugin::filecount::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-fscache</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>None</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-hddtemp</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::hddtemp::host</p>
</li>
<li>
<p>collectd::plugin::hddtemp::port</p>
</li>
<li>
<p>collectd::plugin::hddtemp::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-hugepages</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::hugepages::report_per_node_hp</p>
</li>
<li>
<p>collectd::plugin::hugepages::report_root_hp</p>
</li>
<li>
<p>collectd::plugin::hugepages::values_pages</p>
</li>
<li>
<p>collectd::plugin::hugepages::values_bytes</p>
</li>
<li>
<p>collectd::plugin::hugepages::values_percentage</p>
</li>
<li>
<p>collectd::plugin::hugepages::interval</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>collectd-intel_rdt</strong></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">collectd-interface</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::interface::interfaces</p>
</li>
<li>
<p>collectd::plugin::interface::ignoreselected</p>
</li>
<li>
<p>collectd::plugin::interface::reportinactive</p>
</li>
<li>
<p>Collectd::plugin::interface::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-ipc</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>None</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-ipmi</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::ipmi::ignore_selected</p>
</li>
<li>
<p>collectd::plugin::ipmi::notify_sensor_add</p>
</li>
<li>
<p>collectd::plugin::ipmi::notify_sensor_remove</p>
</li>
<li>
<p>collectd::plugin::ipmi::notify_sensor_not_present</p>
</li>
<li>
<p>collectd::plugin::ipmi::sensors</p>
</li>
<li>
<p>collectd::plugin::ipmi::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-irq</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::irq::irqs</p>
</li>
<li>
<p>collectd::plugin::irq::ignoreselected</p>
</li>
<li>
<p>collectd::plugin::irq::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-load</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::load::report_relative</p>
</li>
<li>
<p>collectd::plugin::load::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-logfile</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::logfile::log_level</p>
</li>
<li>
<p>collectd::plugin::logfile::log_file</p>
</li>
<li>
<p>collectd::plugin::logfile::log_timestamp</p>
</li>
<li>
<p>collectd::plugin::logfile::print_severity</p>
</li>
<li>
<p>collectd::plugin::logfile::interval</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>collectd-madwifi</strong></p>
</div>
<div class="paragraph">
<p><strong>collectd-mbmon</strong></p>
</div>
<div class="paragraph">
<p><strong>collectd-md</strong></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">collectd-memcached</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::memcached::instances</p>
</li>
<li>
<p>collectd::plugin::memcached::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-memory</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::memory::valuesabsolute</p>
</li>
<li>
<p>collectd::plugin::memory::valuespercentage</p>
</li>
<li>
<p>collectd::plugin::memory::interval
collectd-multimeter</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>collectd-multimeter</strong></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">collectd-mysql</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::mysql::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-netlink</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::netlink::interfaces</p>
</li>
<li>
<p>collectd::plugin::netlink::verboseinterfaces</p>
</li>
<li>
<p>collectd::plugin::netlink::qdiscs</p>
</li>
<li>
<p>collectd::plugin::netlink::classes</p>
</li>
<li>
<p>collectd::plugin::netlink::filters</p>
</li>
<li>
<p>collectd::plugin::netlink::ignoreselected</p>
</li>
<li>
<p>collectd::plugin::netlink::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-network</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::network::timetolive</p>
</li>
<li>
<p>collectd::plugin::network::maxpacketsize</p>
</li>
<li>
<p>collectd::plugin::network::forward</p>
</li>
<li>
<p>collectd::plugin::network::reportstats</p>
</li>
<li>
<p>collectd::plugin::network::listeners</p>
</li>
<li>
<p>collectd::plugin::network::servers</p>
</li>
<li>
<p>collectd::plugin::network::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-nfs</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::nfs::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-ntpd</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::ntpd::host</p>
</li>
<li>
<p>collectd::plugin::ntpd::port</p>
</li>
<li>
<p>collectd::plugin::ntpd::reverselookups</p>
</li>
<li>
<p>collectd::plugin::ntpd::includeunitid</p>
</li>
<li>
<p>collectd::plugin::ntpd::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-numa</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>None</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>collectd-olsrd</strong></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">collectd-openvpn</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::openvpn::statusfile</p>
</li>
<li>
<p>collectd::plugin::openvpn::improvednamingschema</p>
</li>
<li>
<p>collectd::plugin::openvpn::collectcompression</p>
</li>
<li>
<p>collectd::plugin::openvpn::collectindividualusers</p>
</li>
<li>
<p>collectd::plugin::openvpn::collectusercount</p>
</li>
<li>
<p>collectd::plugin::openvpn::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-ovs_events</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::ovs_events::address</p>
</li>
<li>
<p>collectd::plugin::ovs_events::dispatch</p>
</li>
<li>
<p>collectd::plugin::ovs_events::interfaces</p>
</li>
<li>
<p>collectd::plugin::ovs_events::send_notification</p>
</li>
<li>
<p>collectd::plugin::ovs_events::$port</p>
</li>
<li>
<p>collectd::plugin::ovs_events::socket</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-ovs_stats</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::ovs_stats::address</p>
</li>
<li>
<p>collectd::plugin::ovs_stats::bridges</p>
</li>
<li>
<p>collectd::plugin::ovs_stats::port</p>
</li>
<li>
<p>collectd::plugin::ovs_stats::socket</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-ping</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::ping::hosts</p>
</li>
<li>
<p>collectd::plugin::ping::timeout</p>
</li>
<li>
<p>collectd::plugin::ping::ttl</p>
</li>
<li>
<p>collectd::plugin::ping::source_address</p>
</li>
<li>
<p>collectd::plugin::ping::device</p>
</li>
<li>
<p>collectd::plugin::ping::max_missed</p>
</li>
<li>
<p>collectd::plugin::ping::size</p>
</li>
<li>
<p>collectd::plugin::ping::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-powerdns</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::powerdns::interval</p>
</li>
<li>
<p>collectd::plugin::powerdns::servers</p>
</li>
<li>
<p>collectd::plugin::powerdns::recursors</p>
</li>
<li>
<p>collectd::plugin::powerdns::local_socket</p>
</li>
<li>
<p>collectd::plugin::powerdns::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-processes</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::processes::processes</p>
</li>
<li>
<p>collectd::plugin::processes::process_matches</p>
</li>
<li>
<p>collectd::plugin::processes::collect_context_switch</p>
</li>
<li>
<p>collectd::plugin::processes::collect_file_descriptor</p>
</li>
<li>
<p>collectd::plugin::processes::collect_memory_maps</p>
</li>
<li>
<p>collectd::plugin::powerdns::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-protocols</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::protocols::ignoreselected</p>
</li>
<li>
<p>collectd::plugin::protocols::values</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>collectd-python</strong></p>
</div>
<div class="paragraph">
<p><strong>collectd-serial</strong></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">collectd-smart</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::smart::disks</p>
</li>
<li>
<p>collectd::plugin::smart::ignoreselected</p>
</li>
<li>
<p>collectd::plugin::smart::interval</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>collectd-snmp_agent</strong></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">collectd-statsd</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::statsd::host</p>
</li>
<li>
<p>collectd::plugin::statsd::port</p>
</li>
<li>
<p>collectd::plugin::statsd::deletecounters</p>
</li>
<li>
<p>collectd::plugin::statsd::deletetimers</p>
</li>
<li>
<p>collectd::plugin::statsd::deletegauges</p>
</li>
<li>
<p>collectd::plugin::statsd::deletesets</p>
</li>
<li>
<p>collectd::plugin::statsd::countersum</p>
</li>
<li>
<p>collectd::plugin::statsd::timerpercentile</p>
</li>
<li>
<p>collectd::plugin::statsd::timerlower</p>
</li>
<li>
<p>collectd::plugin::statsd::timerupper</p>
</li>
<li>
<p>collectd::plugin::statsd::timersum</p>
</li>
<li>
<p>collectd::plugin::statsd::timercount</p>
</li>
<li>
<p>collectd::plugin::statsd::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-swap</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::swap::reportbydevice</p>
</li>
<li>
<p>collectd::plugin::swap::reportbytes</p>
</li>
<li>
<p>collectd::plugin::swap::valuesabsolute</p>
</li>
<li>
<p>collectd::plugin::swap::valuespercentage</p>
</li>
<li>
<p>collectd::plugin::swap::reportio</p>
</li>
<li>
<p>collectd::plugin::swap::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-syslog</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::syslog::log_level</p>
</li>
<li>
<p>collectd::plugin::syslog::notify_level</p>
</li>
<li>
<p>collectd::plugin::syslog::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-table</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::table::tables</p>
</li>
<li>
<p>collectd::plugin::table::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-tail</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::tail::files</p>
</li>
<li>
<p>collectd::plugin::tail::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-tail_csv</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::tail_csv::metrics</p>
</li>
<li>
<p>collectd::plugin::tail_csv::files</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-tcpconns</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::tcpconns::localports</p>
</li>
<li>
<p>collectd::plugin::tcpconns::remoteports</p>
</li>
<li>
<p>collectd::plugin::tcpconns::listening</p>
</li>
<li>
<p>collectd::plugin::tcpconns::allportssummary</p>
</li>
<li>
<p>collectd::plugin::tcpconns::interval</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>collectd-ted</strong></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">collectd-thermal</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::thermal::devices</p>
</li>
<li>
<p>collectd::plugin::thermal::ignoreselected</p>
</li>
<li>
<p>collectd::plugin::thermal::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-threshold</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::threshold::types</p>
</li>
<li>
<p>collectd::plugin::threshold::plugins</p>
</li>
<li>
<p>collectd::plugin::threshold::hosts</p>
</li>
<li>
<p>collectd::plugin::threshold::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-turbostat</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::turbostat::core_c_states</p>
</li>
<li>
<p>collectd::plugin::turbostat::package_c_states</p>
</li>
<li>
<p>collectd::plugin::turbostat::system_management_interrupt</p>
</li>
<li>
<p>collectd::plugin::turbostat::digital_temperature_sensor</p>
</li>
<li>
<p>collectd::plugin::turbostat::tcc_activation_temp</p>
</li>
<li>
<p>collectd::plugin::turbostat::running_average_power_limit</p>
</li>
<li>
<p>collectd::plugin::turbostat::logical_core_names</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>collectd-unixsock</strong></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">collectd-uptime</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::uptime::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-users</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::users::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-uuid</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::uuid::uuid_file</p>
</li>
<li>
<p>collectd::plugin::uuid::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-virt</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::virt::connection</p>
</li>
<li>
<p>collectd::plugin::virt::refresh_interval</p>
</li>
<li>
<p>collectd::plugin::virt::domain</p>
</li>
<li>
<p>collectd::plugin::virt::block_device</p>
</li>
<li>
<p>collectd::plugin::virt::interface_device</p>
</li>
<li>
<p>collectd::plugin::virt::ignore_selected</p>
</li>
<li>
<p>collectd::plugin::virt::hostname_format</p>
</li>
<li>
<p>collectd::plugin::virt::interface_format</p>
</li>
<li>
<p>collectd::plugin::virt::extra_stats</p>
</li>
<li>
<p>collectd::plugin::virt::interval</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-vmem</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::vmem::verbose</p>
</li>
<li>
<p>collectd::plugin::vmem::interval</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>collectd-vserver</strong></p>
</div>
<div class="paragraph">
<p><strong>collectd-wireless</strong></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">collectd-write_graphite</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::write_graphite::carbons</p>
</li>
<li>
<p>collectd::plugin::write_graphite::carbon_defaults</p>
</li>
<li>
<p>collectd::plugin::write_graphite::globals</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-write_kafka</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::write_kafka::kafka_host</p>
</li>
<li>
<p>collectd::plugin::write_kafka::kafka_port</p>
</li>
<li>
<p>collectd::plugin::write_kafka::kafka_hosts</p>
</li>
<li>
<p>collectd::plugin::write_kafka::topics</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-write_log</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>collectd::plugin::write_log::format</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">collectd-zfs_arc</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>None</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-04-16 15:15:04 UTC
</div>
</div>
</body>
</html>